(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const d=100*2,f=60*2,l=6,g=d,h=f,S="#0eb100",D="#e0e0e0",m=document.createElement("canvas"),b=m.getContext("2d");if(b===null)throw Error("i'm sorry but browser not support canvas 2d");m.width=d*l;m.height=f*l;m.style.border="1px solid #999";const P=()=>m,_=()=>b,I=r=>r===S,N=r=>"#"+r.map(e=>("0"+e.toString(16)).slice(-2)).slice(0,3).join(""),R=(r,e)=>r.fill(null).map(e),F=()=>R(Array(f),()=>R(Array(d),()=>!1)),y=(r,{i:e,j:t,isLife:o})=>{r.fillStyle=o?S:D,r.fillRect(e*l,t*l,l,l),r.strokeStyle="gray",r.strokeRect(e*l,t*l,l,l)},M=r=>{const e=[];let t=0,o=0;for(;t<f;){for(e[t]=[],o=0;o<d;){const n=Math.random()>.8;e[t][o]=n,y(r,{i:o,j:t,isLife:n}),++o}++t}return e},T=(r,e,t)=>[e>0&&t>0?r[e-1][t-1]:!1,e>0?r[e-1][t]:!1,e>0&&t<=g-2?r[e-1][t+1]:!1,t>0?r[e][t-1]:!1,t<=g-2?r[e][t+1]:!1,e<=h-2&&t>0?r[e+1][t-1]:!1,e<=h-2?r[e+1][t]:!1,e<=h-2&&t<=g-2?r[e+1][t+1]:!1].filter(o=>o).length,H=(r,e)=>{const t=[];let o=0,n=0,s,c,p;for(;o<f;){for(t[o]=[],n=0;n<d;)c=e[o][n],p=T(e,o,n),c?p<2||p>3?s=!1:s=!0:p===3?s=!0:s=!1,s!==c&&y(r,{i:n,j:o,isLife:s}),t[o][n]=s,++n;++o}return t},q=(r,e)=>{let t=0,o=0;for(;t<f;){for(o=0;o<d;)y(r,{i:o,j:t,isLife:e[t][o]}),++o;++t}},A=(r,e,{offsetX:t,offsetY:o,isLife:n})=>{const s=(t-t%l)/l,c=(o-o%l)/l;e[c][s]!==n&&(e[c][s]=n,y(r,{i:s,j:c,isLife:n}))};const O=document.querySelector("#start"),U=document.querySelector("#clear"),v=document.querySelector("#random"),w=document.querySelector("#step"),E=document.querySelector("#app"),L=P(),a=_();E==null||E.append(L);let i=F(),u=!1;const B=()=>{u&&(i=H(a,i),requestAnimationFrame(B))},$=()=>{if(u=!u,!u){O.textContent="start";return}O.textContent="stop",B()},k=()=>{i=M(a)},K=()=>{u=!1,i=i.map(r=>r.map(()=>!1)),q(a,i)},Z=()=>{u=!1,i=H(a,i)};let x=!1,C;const z=({offsetX:r,offsetY:e})=>{u=!1,x=!0;const t=[...a.getImageData(r,e,1,1).data];C=!I(N(t)),A(a,i,{offsetX:r,offsetY:e,isLife:C})},G=({offsetX:r,offsetY:e})=>{x&&A(a,i,{offsetX:r,offsetY:e,isLife:C})},J=()=>{x=!1};v==null||v.addEventListener("click",k);O.addEventListener("click",$);U.addEventListener("click",K);w==null||w.addEventListener("click",Z);L.addEventListener("mousedown",z);L.addEventListener("mousemove",G);L.addEventListener("mouseup",J);q(a,i);
